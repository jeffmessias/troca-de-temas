Esse código foi feito através do canal da RocketSeat ensinando a mudar o tema sem javaScript
https://www.youtube.com/watch?v=XyTYr07OM7c&list=WL&index=1&ab_channel=Rocketseat

 conhecer propriedades modernas do CSS e entender quais as possibilidades de criação que elas possuem.

Uma delas é o seletor :has() , que funciona quase como um if na programação. 

Em navegadores antigos sem o suporte é necessario fazer via javascript usando DOM.